<!doctype html>
<html lang="ru">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>–ë—É–¥–µ—à—å –º–æ–∏–º –í–∞–ª–µ–Ω—Ç–∏–Ω–æ–º? üíôüíö | Ultimate Glass Edition</title>
    <!--
  CUSTOMIZATION:
  1. GIF URLs     ‚Üí YES_GIF_URL / NO_GIF_URL in <script>
  2. Palette      ‚Üí CSS variables in :root / [data-theme="neon"]
  3. Content      ‚Üí REASONS, NO_TEXTS, ROMANTIC_MSGS arrays
  4. Particles    ‚Üí PARTICLE_COUNT, CONFETTI_COUNT
  5. Easter Egg   ‚Üí Type "LOVE" on keyboard for secret card
  6. Mini-game    ‚Üí Catch 5 floating hearts for bonus message
  7. Theme toggle ‚Üí Button in top-right corner
  8. Audio        ‚Üí Plays only on YES click (Web Audio API, no files)
-->
    <style>
        /* ============================== CSS VARIABLES ============================== */
        :root {
            --bg1: #031026;
            --bg2: #04323a;
            --bg3: #021a1e;
            --accent: #2bb7ff;
            --accent2: #00e6a0;
            --accent3: #00d4ff;
            --glass: rgba(255, 255, 255, 0.05);
            --glass-b: rgba(255, 255, 255, 0.08);
            --glass-blur: 18px;
            --text: #e8f4ff;
            --text-dim: rgba(232, 244, 255, 0.6);
            --radius: 24px;
            --ease: cubic-bezier(0.25, 1, 0.5, 1);
        }

        /* Neon Love Night theme */
        [data-theme="neon"] {
            --bg1: #0a0015;
            --bg2: #1a0028;
            --bg3: #12001f;
            --accent: #ff2d7b;
            --accent2: #ff6ec7;
            --accent3: #c792ea;
            --glass: rgba(255, 100, 200, 0.06);
            --glass-b: rgba(255, 100, 200, 0.12);
        }

        /* ============================== RESET ============================== */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0
        }

        html,
        body {
            height: 100%
        }

        body {
            font-family: Inter, "Helvetica Neue", Arial, sans-serif;
            background: linear-gradient(175deg, var(--bg1), var(--bg2) 55%, var(--bg3));
            color: var(--text);
            -webkit-font-smoothing: antialiased;
            overflow-x: hidden;
            overflow-y: auto;
            transition: background .6s;
        }

        /* ============================== BACKGROUND LAYERS ============================== */
        .bg-layer {
            position: fixed;
            inset: 0;
            pointer-events: none
        }

        .bg-grad {
            z-index: 0;
            background: radial-gradient(ellipse 1400px 700px at 8% 15%, rgba(11, 60, 95, 0.4), transparent);
            mix-blend-mode: overlay;
            animation: shiftBg 22s linear infinite
        }

        @keyframes shiftBg {
            0% {
                transform: translateX(-8%)
            }

            50% {
                transform: translateX(8%)
            }

            100% {
                transform: translateX(-8%)
            }
        }

        canvas#bgCanvas {
            z-index: 1
        }

        canvas#fxCanvas {
            z-index: 2
        }

        /* ============================== THEME TOGGLE ============================== */
        .theme-toggle {
            position: fixed;
            top: 16px;
            right: 16px;
            z-index: 999;
            background: var(--glass);
            border: 1px solid var(--glass-b);
            backdrop-filter: blur(12px);
            border-radius: 50px;
            padding: 8px 16px;
            color: var(--text);
            cursor: pointer;
            font-size: 12px;
            font-weight: 600;
            transition: all .3s;
        }

        .theme-toggle:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: scale(1.05)
        }

        /* ============================== LOVE COUNTER ============================== */
        .love-counter {
            position: fixed;
            top: 16px;
            left: 16px;
            z-index: 999;
            background: var(--glass);
            border: 1px solid var(--glass-b);
            backdrop-filter: blur(12px);
            border-radius: 50px;
            padding: 8px 18px;
            font-size: 13px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: all .3s;
        }

        .love-counter .heart-icon {
            display: inline-block;
            animation: pulse 1s infinite;
            color: #ff4d6d;
        }

        @keyframes pulse {

            0%,
            100% {
                transform: scale(1)
            }

            50% {
                transform: scale(1.25)
            }
        }

        /* ============================== LAYOUT ============================== */
        .page-wrap {
            position: relative;
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 30px 16px;
        }

        /* ============================== GLASS CARD ============================== */
        .glass-card {
            position: relative;
            width: min(980px, 96vw);
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 24px;
            padding: 40px;
            border-radius: var(--radius);
            background: var(--glass);
            border: 1px solid var(--glass-b);
            backdrop-filter: blur(var(--glass-blur));
            box-shadow: 0 12px 40px rgba(0, 0, 0, .55), 0 0 60px rgba(0, 230, 160, .04);
            animation: cardEntry .8s var(--ease) both .3s;
            transform-style: preserve-3d;
            perspective: 1000px;
            transition: transform .15s ease-out, box-shadow .3s;
        }

        @keyframes cardEntry {
            from {
                opacity: 0;
                transform: translateY(20px)
            }

            to {
                opacity: 1;
                transform: translateY(0)
            }
        }

        /* Shimmer border */
        .glass-card::before {
            content: '';
            position: absolute;
            inset: -1px;
            border-radius: var(--radius);
            background: conic-gradient(from 0deg, transparent 60%, var(--accent), transparent 80%);
            z-index: -1;
            animation: shimmer 6s linear infinite;
            opacity: .18;
        }

        @keyframes shimmer {
            to {
                transform: rotate(360deg)
            }
        }

        /* Hover glow on card */
        .glass-card:hover {
            box-shadow: 0 12px 40px rgba(0, 0, 0, .55), 0 0 80px rgba(0, 230, 160, .08);
        }

        @media(max-width:880px) {
            .glass-card {
                grid-template-columns: 1fr;
                padding: 24px
            }
        }

        /* ============================== TYPOGRAPHY ============================== */
        .left h1 {
            font-size: clamp(22px, 3.8vw, 36px);
            letter-spacing: -.5px;
            line-height: 1.25;
            margin-bottom: 12px
        }

        .typewriter-cursor {
            animation: blink .7s step-end infinite;
            color: var(--accent)
        }

        @keyframes blink {

            0%,
            100% {
                opacity: 1
            }

            50% {
                opacity: 0
            }
        }

        .lead {
            color: var(--text-dim);
            font-size: clamp(14px, 1.6vw, 16px);
            line-height: 1.55;
            margin-bottom: 14px
        }

        /* Rotating romantic message */
        .romantic-msg {
            font-size: 13px;
            color: var(--accent2);
            margin-bottom: 20px;
            min-height: 20px;
            transition: opacity .4s;
            font-style: italic;
        }

        /* ============================== BUTTONS ============================== */
        .actions {
            display: flex;
            gap: 14px;
            align-items: center;
            position: relative;
            min-height: 60px
        }

        .btn {
            font-family: inherit;
            font-weight: 700;
            border-radius: 14px;
            border: none;
            cursor: pointer;
            transition: all .35s var(--ease);
            outline: none;
        }

        .btn:focus-visible {
            outline: 3px solid rgba(43, 183, 255, .5);
            outline-offset: 2px
        }

        .btn-yes {
            padding: 15px 34px;
            font-size: 15px;
            background: linear-gradient(135deg, var(--accent), var(--accent2));
            color: #002129;
            box-shadow: 0 8px 24px rgba(0, 230, 160, .18);
            /* magnetic button needs transform from JS */
        }

        .btn-yes:hover {
            box-shadow: 0 12px 32px rgba(0, 230, 160, .3)
        }

        .btn-yes:active {
            transform: scale(.97) !important
        }

        .btn-no {
            padding: 13px 24px;
            font-size: 14px;
            background: transparent;
            border: 1px solid var(--glass-b);
            color: var(--text);
            transition: all .35s cubic-bezier(.175, .885, .32, 1.275);
        }

        /* ============================== HINT CARDS ============================== */
        .hint-cards {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 18px
        }

        .hint-card {
            flex: 1 1 130px;
            padding: 12px 14px;
            border-radius: 14px;
            background: rgba(255, 255, 255, .025);
            border: 1px solid rgba(255, 255, 255, .04);
            font-size: 13px;
            text-align: center;
            transition: all .4s var(--ease);
            position: relative;
            overflow: hidden;
        }

        .hint-card:hover {
            background: rgba(255, 255, 255, .06);
            border-color: rgba(0, 230, 160, .15);
            transform: translateY(-3px);
        }

        /* Shimmer on hover for hint cards */
        .hint-card::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, .06), transparent);
            transition: left .6s;
        }

        .hint-card:hover::after {
            left: 100%
        }

        /* ============================== ASIDE MINI CARDS ============================== */
        .right {
            display: flex;
            flex-direction: column;
            gap: 16px
        }

        .mini {
            padding: 16px;
            border-radius: 16px;
            background: linear-gradient(180deg, rgba(255, 255, 255, .025), rgba(255, 255, 255, .008));
            border: 1px solid rgba(255, 255, 255, .04);
            backdrop-filter: blur(8px);
            font-size: 13px;
            line-height: 1.5;
            color: var(--text-dim);
            transition: all .4s;
            position: relative;
            overflow: hidden;
        }

        .mini strong {
            color: var(--accent2);
            display: block;
            margin-bottom: 4px
        }

        .mini:hover {
            border-color: rgba(255, 255, 255, .1);
            background: rgba(255, 255, 255, .04)
        }

        /* ============================== MODALS ============================== */
        .modal-overlay {
            position: fixed;
            inset: 0;
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(0, 0, 0, .7);
            backdrop-filter: blur(10px);
            visibility: hidden;
            opacity: 0;
            transition: opacity .35s, visibility .35s;
            padding: 20px;
        }

        .modal-overlay.open {
            visibility: visible;
            opacity: 1
        }

        .modal-dialog {
            width: min(540px, 92vw);
            max-height: 88vh;
            overflow-y: auto;
            background: linear-gradient(180deg, rgba(10, 20, 40, .96), rgba(4, 50, 58, .93));
            border: 1px solid var(--glass-b);
            backdrop-filter: blur(20px);
            border-radius: 22px;
            padding: 30px;
            transform: scale(.9);
            opacity: 0;
            transition: all .5s var(--ease);
        }

        .modal-overlay.open .modal-dialog {
            transform: scale(1);
            opacity: 1
        }

        .modal-gif {
            width: 100%;
            max-width: 400px;
            border-radius: 14px;
            display: block;
            margin: 18px auto
        }

        /* ============================== YES REVEAL SEQUENCE ============================== */
        .reveal-overlay {
            position: fixed;
            inset: 0;
            z-index: 900;
            background: rgba(0, 0, 0, 0);
            pointer-events: none;
            transition: background 1s;
        }

        .reveal-overlay.active {
            background: rgba(0, 0, 0, .5);
            pointer-events: all
        }

        .glass-heart {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            font-size: 160px;
            opacity: 0;
            z-index: 901;
            filter: drop-shadow(0 0 60px var(--accent2));
            transition: all 1.2s var(--ease);
            pointer-events: none;
        }

        .glass-heart.show {
            transform: translate(-50%, -50%) scale(1);
            opacity: 1
        }

        .glass-heart.burst {
            transform: translate(-50%, -50%) scale(2);
            opacity: 0
        }

        /* ============================== REASONS CAROUSEL ============================== */
        .reasons-wrap {
            margin-top: 18px;
            display: flex;
            gap: 10px;
            overflow-x: auto;
            scroll-behavior: smooth;
            padding-bottom: 8px;
            -webkit-overflow-scrolling: touch;
        }

        .reasons-wrap::-webkit-scrollbar {
            height: 5px
        }

        .reasons-wrap::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, .1);
            border-radius: 10px
        }

        .reason-item {
            flex: 0 0 240px;
            padding: 14px;
            border-radius: 14px;
            background: rgba(255, 255, 255, .03);
            border: 1px solid rgba(255, 255, 255, .05);
            border-left: 3px solid var(--accent2);
            font-size: 13px;
            line-height: 1.45;
        }

        /* ============================== TOAST ============================== */
        .toast {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%) translateY(80px);
            background: var(--accent2);
            color: #002129;
            padding: 12px 28px;
            border-radius: 50px;
            font-weight: 700;
            font-size: 14px;
            z-index: 2000;
            opacity: 0;
            transition: all .4s;
            pointer-events: none;
        }

        .toast.show {
            transform: translateX(-50%) translateY(0);
            opacity: 1
        }

        /* ============================== SHARE ============================== */
        .share-btn {
            margin-top: 14px;
            background: none;
            border: none;
            color: var(--accent);
            cursor: pointer;
            font-size: 13px;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            opacity: .7;
            transition: .3s;
        }

        .share-btn:hover {
            opacity: 1;
            text-decoration: underline
        }

        /* ============================== EASTER EGG CARD ============================== */
        .easter-egg {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            z-index: 1100;
            background: var(--glass);
            border: 2px solid var(--accent2);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            padding: 40px;
            text-align: center;
            max-width: 400px;
            transition: all .6s var(--ease);
            box-shadow: 0 0 80px rgba(0, 230, 160, .2);
        }

        .easter-egg.show {
            transform: translate(-50%, -50%) scale(1)
        }

        .easter-egg h2 {
            color: var(--accent2);
            margin-bottom: 12px
        }

        .easter-egg .close-ee {
            margin-top: 16px;
            background: var(--accent2);
            color: #000;
            border: none;
            padding: 10px 24px;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 700;
        }

        /* ============================== MINI-GAME CATCH HEARTS ============================== */
        .catch-heart {
            position: fixed;
            width: 30px;
            height: 30px;
            font-size: 24px;
            cursor: pointer;
            z-index: 800;
            transition: transform .2s;
            user-select: none;
            animation: floatDown linear forwards;
        }

        @keyframes floatDown {
            0% {
                transform: translateY(0) rotate(0)
            }

            100% {
                transform: translateY(110vh) rotate(360deg)
            }
        }

        /* ============================== CURSOR TRAIL ============================== */
        .cursor-heart {
            position: fixed;
            pointer-events: none;
            z-index: 9999;
            font-size: 14px;
            opacity: 1;
            transition: all .6s ease-out;
        }

        /* ============================== RESPONSIVE ============================== */
        @media(max-width:500px) {
            .actions {
                flex-direction: column;
                align-items: stretch
            }

            .btn-yes,
            .btn-no {
                width: 100%;
                text-align: center
            }

            .glass-heart {
                font-size: 100px !important
            }
        }

        /* ============================== REDUCED MOTION ============================== */
        @media(prefers-reduced-motion:reduce) {

            *,
            *::before,
            *::after {
                animation-duration: .01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: .01ms !important;
            }
        }
    </style>
</head>

<body>
    <!-- Background layers -->
    <div class="bg-layer bg-grad" aria-hidden="true"></div>
    <canvas id="bgCanvas" class="bg-layer" aria-hidden="true"></canvas>
    <canvas id="fxCanvas" class="bg-layer" aria-hidden="true"></canvas>

    <!-- Theme toggle -->
    <button class="theme-toggle" id="themeBtn" aria-label="–°–º–µ–Ω–∏—Ç—å —Ç–µ–º—É">üé® Deep Blue</button>

    <!-- Love counter -->
    <div class="love-counter" id="loveCounter">
        <span class="heart-icon">‚ù§Ô∏è</span>
        <span id="loveCount">0</span>
    </div>

    <!-- A11y live region -->
    <div id="liveRegion" aria-live="polite"
        style="position:absolute;width:1px;height:1px;overflow:hidden;clip:rect(0,0,0,0)"></div>

    <!-- Reveal sequence overlay -->
    <div class="reveal-overlay" id="revealOverlay" aria-hidden="true"></div>
    <div class="glass-heart" id="glassHeart" aria-hidden="true">üíé</div>

    <!-- Easter Egg -->
    <div class="easter-egg" id="easterEgg" role="dialog" aria-modal="true">
        <h2>üíå –°–µ–∫—Ä–µ—Ç–Ω–æ–µ –ø–æ—Å–ª–∞–Ω–∏–µ!</h2>
        <p style="color:var(--text-dim)">–¢—ã –Ω–∞—à–ª–∞ —Å–µ–∫—Ä–µ—Ç! –¢—ã ‚Äî –º–æ–π –∫–æ–¥ –±–µ–∑ –±–∞–≥–æ–≤, –º–æ–π merge –±–µ–∑ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤, –º–æ–π –¥–µ–ø–ª–æ–π
            –±–µ–∑ –¥–∞—É–Ω—Ç–∞–π–º–∞.</p>
        <p style="margin-top:12px;font-size:24px">ü´∂üíôüíö‚ú®üíéü•∞</p>
        <button class="close-ee" id="closeEE">–ó–∞–∫—Ä—ã—Ç—å üíñ</button>
    </div>

    <div class="page-wrap">
        <div class="glass-card" id="mainCard" role="main" aria-labelledby="mainQ">

            <!-- LEFT -->
            <div class="left">
                <h1 id="mainQ"><span id="typewriterText"></span><span class="typewriter-cursor">|</span></h1>
                <p class="lead">
                    –°–∫–∞–∂–∏ ¬´–î–∞¬ª ‚Äî –∏ —Å–µ—Ä–¥—Ü–∞ –ø–æ–ª–µ—Ç—è—Ç, –∫–æ–Ω—Ñ–µ—Ç—Ç–∏ –≤–∑–æ—Ä–≤–µ—Ç—Å—è, –∞ –º–∏—Ä —Å—Ç–∞–Ω–µ—Ç –Ω–µ–º–Ω–æ–≥–æ –≤–æ–ª—à–µ–±–Ω–µ–µ.<br>
                    –ò–ª–∏ –ø–æ–ø—Ä–æ–±—É–π –Ω–∞–∂–∞—Ç—å ¬´–ù–µ—Ç¬ª... –µ—Å–ª–∏ —Å–º–æ–∂–µ—à—å üòâ
                </p>

                <!-- Rotating romantic message -->
                <div class="romantic-msg" id="romanticMsg" aria-live="polite"></div>

                <!-- Buttons -->
                <div class="actions" id="actionsArea">
                    <button class="btn btn-yes" id="yesBtn" aria-haspopup="dialog">–î–∞ ‚Äî –∫–æ–Ω–µ—á–Ω–æ! üíñ</button>
                    <button class="btn btn-no" id="noBtn" aria-haspopup="dialog">–ù–µ—Ç... üò¨</button>
                </div>

                <!-- Hint cards -->
                <div class="hint-cards">
                    <div class="hint-card">–ë—É–¥–µ—à—å –º–æ–µ–π? üíô</div>
                    <div class="hint-card">–£–∫—Ä–∞–¥—É —Å–µ—Ä–¥—Ü–µ? üí´</div>
                    <div class="hint-card">‚àû –æ–±—ä—è—Ç–∏–π? ü§ç</div>
                    <div class="hint-card">–°—É–¥—å–±–∞? üíå</div>
                    <div class="hint-card">–ù–∞–∂–º–∏ –î–∞ ‚ú®</div>
                </div>
            </div>

            <!-- RIGHT -->
            <aside class="right">
                <div class="mini">
                    <strong>üíé Design</strong>
                    Glassmorphism + Parallax Hearts.<br>
                    3D Tilt + Shimmer Borders.
                </div>
                <div class="mini">
                    <strong>üéÆ Mini-game</strong>
                    –õ–æ–≤–∏ —Å–µ—Ä–¥–µ—á–∫–∏ –º—ã—à–∫–æ–π!<br>
                    <span id="caughtDisplay">–ü–æ–π–º–∞–Ω–æ: 0 / 5</span>
                </div>
                <div class="mini" id="statusCard" aria-live="polite" style="min-height:40px">
                    <strong>üì° Status</strong>
                    –û–∂–∏–¥–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞...
                </div>
            </aside>
        </div>
    </div>

    <!-- YES Modal -->
    <div class="modal-overlay" id="yesModal" role="dialog" aria-modal="true" aria-labelledby="yesTitle">
        <div class="modal-dialog" id="yesDialog" tabindex="-1">
            <h2 id="yesTitle" style="color:var(--accent2)">–£—Ä–∞! üéâ –¢—ã —Å–¥–µ–ª–∞–ª–∞ –º–æ–π –¥–µ–Ω—å!</h2>
            <p style="color:var(--text-dim);margin:8px 0 0 0">–°–º–æ—Ç—Ä–∏, —á—Ç–æ —è –ø–æ–¥–≥–æ—Ç–æ–≤–∏–ª:</p>
            <img class="modal-gif" id="yesGifImg" src="" alt="Romantic celebration GIF" loading="lazy">
            <h3 style="margin-top:18px;color:var(--accent2);font-size:15px">10 –ø—Ä–∏—á–∏–Ω, –ø–æ—á–µ–º—É —è —Ç–µ–±—è –ª—é–±–ª—é:</h3>
            <div class="reasons-wrap" id="reasonsList"></div>
            <button class="share-btn" id="shareBtnModal" type="button">üîó –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É</button>
            <div style="margin-top:14px;text-align:right">
                <button class="btn btn-no" id="closeYesModal" type="button">–ó–∞–∫—Ä—ã—Ç—å üíô</button>
            </div>
        </div>
    </div>

    <!-- NO Modal -->
    <div class="modal-overlay" id="noModal" role="dialog" aria-modal="true" aria-labelledby="noTitle">
        <div class="modal-dialog" id="noDialog" tabindex="-1">
            <h2 id="noTitle" style="color:#ff6b6b">–û—à–∏–±–∫–∞ 404: –û—Ç–∫–∞–∑ –Ω–µ –Ω–∞–π–¥–µ–Ω! üòÖ</h2>
            <p style="color:var(--text-dim);margin:8px 0 0 0">–î–∞–∂–µ –∫–Ω–æ–ø–∫–∞ –Ω–µ —Ö–æ—Ç–µ–ª–∞... –í–æ—Ç –º–µ–º!</p>
            <img class="modal-gif" id="noGifImg" src="" alt="Funny GIF" loading="lazy">
            <div style="margin-top:14px;text-align:right">
                <button class="btn btn-no" id="closeNoModal" type="button">–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞ üòâ</button>
            </div>
        </div>
    </div>

    <div class="toast" id="toast">–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞! üîó</div>

    <script>
        /* ================================================================
           CONFIG
           ================================================================ */
        const YES_GIF_URL = 'https://media.giphy.com/media/l0MYt5jPR6QX5pnqM/giphy.gif';
        const NO_GIF_URL = 'https://media.giphy.com/media/3o6Zt481isNVuQI1l6/giphy.gif';
        const PARTICLE_COUNT = 35;
        const CONFETTI_COUNT = 100;
        const REDUCED = window.matchMedia('(prefers-reduced-motion:reduce)').matches;

        const REASONS = [
            '–¢–≤–æ—è —É–ª—ã–±–∫–∞ –æ—Å–≤–µ—â–∞–µ—Ç –¥–µ–Ω—å ‚òÄÔ∏è', '–£ —Ç–µ–±—è —Å–∞–º–æ–µ –¥–æ–±—Ä–æ–µ —Å–µ—Ä–¥—Ü–µ ü§ç',
            '–¢—ã –ø–æ–Ω–∏–º–∞–µ—à—å –±–µ–∑ —Å–ª–æ–≤ üß©', '–° —Ç–æ–±–æ–π –Ω–µ –±—ã–≤–∞–µ—Ç —Å–∫—É—á–Ω–æ üé¢',
            '–¢–≤–æ—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ ‚Äî —Å–∏–ª–∞ üõ°Ô∏è', '–¢—ã –¥–µ–ª–∞–µ—à—å –ª—É—á—à–µ üå±',
            '–ù–∞—à–∏ —Ä–∞–∑–≥–æ–≤–æ—Ä—ã –±–µ—Å—Ü–µ–Ω–Ω—ã üåå', '–¢–≤–æ–π —é–º–æ—Ä ‚Äî –ª—É—á—à–∏–π üòÇ',
            '–¢–≤–æ–∏ –≥–ª–∞–∑–∞ ‚Äî –æ–∫–µ–∞–Ω üåä', '–¢—ã ‚Äî —ç—Ç–æ –¢–´ ‚ôæÔ∏è'
        ];
        const NO_TEXTS = [
            '–¢—ã —É–≤–µ—Ä–µ–Ω–∞? üò¢', '–ü–æ–¥—É–º–∞–π –µ—â—ë üòÑ', '–û—à–∏–±–∫–∞! –ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä üí´',
            '–ü—Ä–æ–º–∞—Ö–Ω—É–ª–∞—Å—å? üòâ', '–ù–µ—Ç –æ–ø—Ü–∏–∏ ¬´–ù–µ—Ç¬ª üö´', '–°–µ—Ä—å—ë–∑–Ω–æ?! ü•∫', '–ï—â—ë —Ä–∞–∑ üîÑ'
        ];
        const ROMANTIC_MSGS = [
            '–¢—ã ‚Äî –º–æ—ë –Ω–µ–∂–Ω–æ–µ —É—Ç—Ä–æ üåÖ', '–•–æ—á—É –¥–µ—Ä–∂–∞—Ç—å —Ä—É–∫—É –≤—Å–µ–≥–¥–∞ ü§ù',
            '–¢—ã ‚Äî –ª—É—á—à–∏–π —Å—é—Ä–ø—Ä–∏–∑ üéÅ', '–ú–æ—ë —Å–µ—Ä–¥—Ü–µ –±—å—ë—Ç—Å—è –¥–ª—è —Ç–µ–±—è üíì',
            '–° —Ç–æ–±–æ–π –º–∏—Ä —Å–≤–µ—Ç–ª–µ–µ ‚òÄÔ∏è', '–¢—ã ‚Äî –º–æ—è –≤—Å–µ–ª–µ–Ω–Ω–∞—è üåå',
            '–ö–∞–∂–¥—ã–π –¥–µ–Ω—å —Å —Ç–æ–±–æ–π ‚Äî –ø–æ–¥–∞—Ä–æ–∫ üéÄ', '–¢—ã –¥–µ–ª–∞–µ—à—å –∂–∏–∑–Ω—å –≤–æ–ª—à–µ–±–Ω–æ–π ‚ú®'
        ];
        const TYPEWRITER_TEXT = '–ë—É–¥–µ—à—å –ª–∏ —Ç—ã –º–æ–∏–º –≤–∞–ª–µ–Ω—Ç–∏–Ω–æ–º? üíôüíö‚ú®';

        /* ================================================================
           1. MULTI-LAYER PARALLAX CANVAS (background hearts, stars, bubbles)
           ================================================================ */
        const bgCanvas = document.getElementById('bgCanvas');
        const bgCtx = bgCanvas.getContext('2d');
        const fxCanvas = document.getElementById('fxCanvas');
        const fxCtx = fxCanvas.getContext('2d');
        let W, H;

        function resize() {
            W = window.innerWidth; H = window.innerHeight;
            bgCanvas.width = fxCanvas.width = W;
            bgCanvas.height = fxCanvas.height = H;
        }
        resize();
        window.addEventListener('resize', resize);

        /* Draw heart shape */
        function heartPath(ctx, x, y, s, a, c, al) {
            ctx.save(); ctx.translate(x, y); ctx.rotate(a); ctx.scale(s / 40, s / 40);
            ctx.globalAlpha = al; ctx.fillStyle = c;
            ctx.beginPath(); ctx.moveTo(0, 0);
            ctx.bezierCurveTo(0, -12, -20, -12, -20, 5);
            ctx.bezierCurveTo(-20, 25, 0, 35, 0, 50);
            ctx.bezierCurveTo(0, 35, 20, 25, 20, 5);
            ctx.bezierCurveTo(20, -12, 0, -12, 0, 0);
            ctx.fill(); ctx.restore();
        }

        /* Draw star shape */
        function starPath(ctx, x, y, s, a, c, al) {
            ctx.save(); ctx.translate(x, y); ctx.rotate(a);
            ctx.globalAlpha = al; ctx.fillStyle = c;
            ctx.beginPath();
            for (let i = 0; i < 5; i++) {
                ctx.lineTo(Math.cos((18 + i * 72) * Math.PI / 180) * s, Math.sin((18 + i * 72) * Math.PI / 180) * s);
                ctx.lineTo(Math.cos((54 + i * 72) * Math.PI / 180) * s * .4, Math.sin((54 + i * 72) * Math.PI / 180) * s * .4);
            }
            ctx.closePath(); ctx.fill(); ctx.restore();
        }

        /* Draw diamond/sparkle */
        function sparklePath(ctx, x, y, s, al) {
            ctx.save(); ctx.translate(x, y); ctx.globalAlpha = al;
            ctx.fillStyle = '#fff';
            ctx.beginPath();
            ctx.moveTo(0, -s); ctx.lineTo(s * .3, 0);
            ctx.lineTo(0, s); ctx.lineTo(-s * .3, 0);
            ctx.closePath(); ctx.fill(); ctx.restore();
        }

        /* Parallax particle class ‚Äî 3 speed layers */
        class BgParticle {
            constructor(layer) {
                this.layer = layer; // 0=slow,1=mid,2=fast
                this.type = ['heart', 'star', 'bubble', 'sparkle', 'ring', 'letter'][Math.floor(Math.random() * 6)];
                this.reset();
            }
            reset() {
                this.x = Math.random() * W;
                this.y = H + 50 + Math.random() * 200;
                const speeds = [.3, .6, 1.2];
                this.vy = -(speeds[this.layer] + Math.random() * .3);
                this.vx = (Math.random() - .5) * .4;
                this.size = 4 + Math.random() * 14;
                this.angle = Math.random() * Math.PI * 2;
                this.spin = (Math.random() - .5) * .02;
                this.alpha = (.1 + Math.random() * .3) * (this.layer === 0 ? .5 : this.layer === 1 ? .7 : 1);
                const pal = document.documentElement.dataset.theme === 'neon'
                    ? ['rgba(255,45,123,1)', 'rgba(255,110,199,1)', 'rgba(199,146,234,1)']
                    : ['rgba(43,183,255,1)', 'rgba(0,230,160,1)', 'rgba(0,212,255,1)'];
                this.color = pal[Math.floor(Math.random() * pal.length)];
                this.emoji = ['üíå', 'üíç', '‚ú®', 'üå∏', '‚≠ê'][Math.floor(Math.random() * 5)];
            }
            update() {
                this.x += this.vx; this.y += this.vy; this.angle += this.spin;
                if (this.y < -80 || this.x < -80 || this.x > W + 80) this.reset();
            }
            draw(ctx) {
                if (this.type === 'heart') heartPath(ctx, this.x, this.y, this.size, this.angle, this.color, this.alpha);
                else if (this.type === 'star') starPath(ctx, this.x, this.y, this.size * .6, this.angle, this.color, this.alpha);
                else if (this.type === 'sparkle') sparklePath(ctx, this.x, this.y, this.size * .5, this.alpha);
                else if (this.type === 'bubble') {
                    ctx.save(); ctx.globalAlpha = this.alpha * .5;
                    ctx.strokeStyle = this.color; ctx.lineWidth = 1;
                    ctx.beginPath(); ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                    ctx.stroke(); ctx.restore();
                } else {
                    ctx.save(); ctx.globalAlpha = this.alpha;
                    ctx.font = `${this.size * 1.5}px serif`; ctx.textAlign = 'center';
                    ctx.fillText(this.emoji, this.x, this.y); ctx.restore();
                }
            }
        }

        const bgParticles = [];
        const count = REDUCED ? 8 : (W < 600 ? 15 : PARTICLE_COUNT);
        for (let l = 0; l < 3; l++)for (let i = 0; i < Math.floor(count / 3); i++) {
            const p = new BgParticle(l); p.y = Math.random() * H; // start scattered
            bgParticles.push(p);
        }

        /* ================================================================
           2. FX PARTICLES (burst hearts, confetti) ‚Äî drawn on fxCanvas
           ================================================================ */
        const fxParticles = [];

        class FxParticle {
            constructor(x, y, type) {
                this.x = x; this.y = y; this.type = type;
                this.vx = (Math.random() - .5) * (type === 'confetti' ? 9 : 10);
                this.vy = (Math.random() - .8) * (type === 'confetti' ? 7 : 8);
                this.life = 60 + Math.random() * 40; this.maxLife = this.life;
                this.size = type === 'confetti' ? 3 + Math.random() * 6 : 6 + Math.random() * 16;
                this.rot = Math.random() * 360; this.spin = (Math.random() - .5) * .04;
                const cols = ['#ff6b9f', '#ffcf66', '#ff7b7b', '#00e6a0', '#2bb7ff', '#c792ea'];
                this.color = cols[Math.floor(Math.random() * cols.length)];
                this.angle = Math.random() * Math.PI * 2;
            }
            update() {
                this.vy += .15; this.x += this.vx; this.y += this.vy;
                this.rot += 5; this.angle += this.spin; this.life--;
            }
            draw(ctx) {
                const al = Math.max(0, this.life / this.maxLife);
                if (this.type === 'heart') {
                    heartPath(ctx, this.x, this.y, this.size, this.angle, this.color, al);
                } else {
                    ctx.save(); ctx.translate(this.x, this.y);
                    ctx.rotate(this.rot * Math.PI / 180);
                    ctx.fillStyle = this.color; ctx.globalAlpha = al;
                    ctx.fillRect(-this.size / 2, -this.size / 2, this.size, this.size * 1.6);
                    ctx.restore();
                }
            }
            isDead() { return this.life <= 0 }
        }

        function burstHearts(x, y, n) {
            const c = W < 600 ? Math.min(n, 20) : n;
            for (let i = 0; i < c; i++)fxParticles.push(new FxParticle(x, y, 'heart'));
        }
        function spawnConfetti(x, y, n) {
            const c = W < 600 ? Math.min(n, 40) : n;
            for (let i = 0; i < c; i++)fxParticles.push(new FxParticle(x, y, 'confetti'));
        }

        /* ================================================================
           MAIN ANIMATION LOOP
           ================================================================ */
        function mainLoop() {
            // Background layer
            bgCtx.clearRect(0, 0, W, H);
            for (const p of bgParticles) { p.update(); p.draw(bgCtx); }

            // FX layer
            fxCtx.clearRect(0, 0, W, H);
            for (let i = fxParticles.length - 1; i >= 0; i--) {
                fxParticles[i].update(); fxParticles[i].draw(fxCtx);
                if (fxParticles[i].isDead()) fxParticles.splice(i, 1);
            }
            requestAnimationFrame(mainLoop);
        }
        if (!REDUCED) mainLoop();

        /* Prune excess particles */
        setInterval(() => { if (fxParticles.length > 400) fxParticles.splice(0, 150) }, 4000);

        /* ================================================================
           3. EMOJI BURST (DOM-based)
           ================================================================ */
        function emojiBurst(cx, cy) {
            const emojis = ['üíô', 'üíö', '‚ú®', 'ü•∞', 'üíé', 'üéâ', 'ü´∂', 'üíñ'];
            for (let i = 0; i < 18; i++) {
                const el = document.createElement('span');
                el.textContent = emojis[Math.floor(Math.random() * emojis.length)];
                el.style.cssText = `position:fixed;left:${cx}px;top:${cy}px;pointer-events:none;z-index:9999;font-size:${16 + Math.random() * 16}px;transition:all ${.7 + Math.random() * .5}s cubic-bezier(.1,.8,.3,1)`;
                document.body.appendChild(el);
                const a = Math.random() * Math.PI * 2, d = 100 + Math.random() * 250;
                requestAnimationFrame(() => {
                    el.style.transform = `translate(${Math.cos(a) * d}px,${Math.sin(a) * d}px) scale(0) rotate(${Math.random() * 360}deg)`;
                    el.style.opacity = '0';
                });
                setTimeout(() => el.remove(), 1400);
            }
        }

        /* ================================================================
           4. TYPEWRITER EFFECT
           ================================================================ */
        const twEl = document.getElementById('typewriterText');
        let twIdx = 0;
        function typewrite() {
            if (twIdx <= TYPEWRITER_TEXT.length) {
                twEl.textContent = TYPEWRITER_TEXT.slice(0, twIdx);
                twIdx++;
                setTimeout(typewrite, REDUCED ? 5 : 55);
            }
        }
        typewrite();

        /* ================================================================
           5. ROTATING ROMANTIC MESSAGES
           ================================================================ */
        const rmEl = document.getElementById('romanticMsg');
        let rmIdx = 0;
        function rotateMsg() {
            rmEl.style.opacity = '0';
            setTimeout(() => {
                rmEl.textContent = ROMANTIC_MSGS[rmIdx % ROMANTIC_MSGS.length];
                rmEl.style.opacity = '1'; rmIdx++;
            }, 400);
        }
        rotateMsg();
        setInterval(rotateMsg, 5000);

        /* ================================================================
           6. CURSOR HEART TRAIL
           ================================================================ */
        if (!REDUCED) {
            let lastTrail = 0;
            document.addEventListener('mousemove', e => {
                if (Date.now() - lastTrail < 80) return; lastTrail = Date.now();
                const h = document.createElement('span');
                h.className = 'cursor-heart';
                h.textContent = ['‚ù§Ô∏è', 'üíô', 'üíö', '‚ú®'][Math.floor(Math.random() * 4)];
                h.style.left = e.clientX + 'px'; h.style.top = e.clientY + 'px';
                document.body.appendChild(h);
                requestAnimationFrame(() => {
                    h.style.transform = `translate(${(Math.random() - .5) * 40}px,${-30 - Math.random() * 30}px) scale(0)`;
                    h.style.opacity = '0';
                });
                setTimeout(() => h.remove(), 700);
            });
        }

        /* ================================================================
           7. 3D TILT EFFECT on glass card
           ================================================================ */
        const mainCard = document.getElementById('mainCard');
        if (!REDUCED) {
            mainCard.addEventListener('mousemove', e => {
                const r = mainCard.getBoundingClientRect();
                const x = (e.clientX - r.left) / r.width - .5;
                const y = (e.clientY - r.top) / r.height - .5;
                mainCard.style.transform = `perspective(1000px) rotateY(${x * 6}deg) rotateX(${-y * 6}deg)`;
            });
            mainCard.addEventListener('mouseleave', () => {
                mainCard.style.transform = 'perspective(1000px) rotateY(0) rotateX(0)';
            });
        }

        /* ================================================================
           8. MAGNETIC YES BUTTON
           ================================================================ */
        const yesBtn = document.getElementById('yesBtn');
        if (!REDUCED) {
            yesBtn.addEventListener('mousemove', e => {
                const r = yesBtn.getBoundingClientRect();
                const dx = e.clientX - (r.left + r.width / 2);
                const dy = e.clientY - (r.top + r.height / 2);
                yesBtn.style.transform = `translate(${dx * .25}px,${dy * .25}px)`;
            });
            yesBtn.addEventListener('mouseleave', () => { yesBtn.style.transform = '' });
        }

        /* ================================================================
           9. LOVE COUNTER
           ================================================================ */
        let loveCount = 0;
        const loveCountEl = document.getElementById('loveCount');
        function addLove(n = 1) {
            loveCount += n; loveCountEl.textContent = loveCount;
            loveCountEl.animate([{ transform: 'scale(1.4)' }, { transform: 'scale(1)' }], { duration: 300 });
        }
        document.body.addEventListener('click', () => addLove(1));

        /* ================================================================
           10. THEME TOGGLE
           ================================================================ */
        const themeBtn = document.getElementById('themeBtn');
        themeBtn.addEventListener('click', () => {
            const isNeon = document.documentElement.dataset.theme === 'neon';
            document.documentElement.dataset.theme = isNeon ? '' : 'neon';
            themeBtn.textContent = isNeon ? 'üé® Deep Blue' : 'üåô Neon Love';
            // Re-color existing particles
            bgParticles.forEach(p => {
                const pal = isNeon
                    ? ['rgba(43,183,255,1)', 'rgba(0,230,160,1)', 'rgba(0,212,255,1)']
                    : ['rgba(255,45,123,1)', 'rgba(255,110,199,1)', 'rgba(199,146,234,1)'];
                p.color = pal[Math.floor(Math.random() * pal.length)];
            });
        });

        /* ================================================================
           11. WEB AUDIO API ‚Äî romantic chord on YES
           ================================================================ */
        function playLoveChord() {
            try {
                const ac = new (window.AudioContext || window.webkitAudioContext)();
                const notes = [261.63, 329.63, 392.00, 523.25]; // C4 E4 G4 C5
                notes.forEach((freq, i) => {
                    const osc = ac.createOscillator();
                    const gain = ac.createGain();
                    osc.type = 'sine'; osc.frequency.value = freq;
                    gain.gain.setValueAtTime(.08, ac.currentTime);
                    gain.gain.exponentialRampToValueAtTime(.001, ac.currentTime + 2);
                    osc.connect(gain); gain.connect(ac.destination);
                    osc.start(ac.currentTime + i * .08);
                    osc.stop(ac.currentTime + 2.2);
                });
            } catch (e) { }
        }

        /* ================================================================
           12. YES BUTTON ‚Äî MULTI-STEP REVEAL SEQUENCE
           ================================================================ */
        const noBtn = document.getElementById('noBtn');
        const yesModal = document.getElementById('yesModal');
        const noModal = document.getElementById('noModal');
        const statusCard = document.getElementById('statusCard');
        const liveRegion = document.getElementById('liveRegion');
        const revealOverlay = document.getElementById('revealOverlay');
        const glassHeart = document.getElementById('glassHeart');

        function openModal(m) { m.classList.add('open'); const d = m.querySelector('.modal-dialog'); if (d) d.focus(); document.body.style.overflow = 'hidden' }
        function closeModal(m) { m.classList.remove('open'); document.body.style.overflow = '' }
        function lazyGif(img, url) { if (img && url && !img.src) img.src = url }

        document.getElementById('closeYesModal').addEventListener('click', () => closeModal(yesModal));
        document.getElementById('closeNoModal').addEventListener('click', () => closeModal(noModal));

        yesBtn.addEventListener('click', () => {
            playLoveChord();
            addLove(10);

            /* Step 1: Darken screen */
            revealOverlay.classList.add('active');

            /* Step 2: Show glass heart (after 600ms) */
            setTimeout(() => { glassHeart.classList.add('show') }, 600);

            /* Step 3: Heart "opens" ‚Äî burst (after 2s) */
            setTimeout(() => {
                glassHeart.classList.add('burst');
                const r = yesBtn.getBoundingClientRect();
                const cx = W / 2, cy = H / 2;
                burstHearts(cx, cy, 25);
                spawnConfetti(cx, cy, CONFETTI_COUNT);
                emojiBurst(cx, cy);
            }, 2000);

            /* Step 4: Remove overlay, show modal (after 3.2s) */
            setTimeout(() => {
                revealOverlay.classList.remove('active');
                glassHeart.classList.remove('show', 'burst');
                glassHeart.style.display = 'none';

                yesBtn.textContent = 'You made me the happiest! ü•∞';
                yesBtn.style.pointerEvents = 'none';
                statusCard.innerHTML = '<strong>üì° Status</strong> ‚ù§Ô∏è PERFECT CONNECTION!';
                liveRegion.textContent = '–û—Ç–≤–µ—Ç: –î–∞! –°–µ—Ä–¥—Ü–∞ –ª–µ—Ç—è—Ç!';

                lazyGif(document.getElementById('yesGifImg'), YES_GIF_URL);
                populateReasons();
                openModal(yesModal);

                mainCard.animate(
                    [{ transform: 'translate(0,0)' }, { transform: 'translate(-2px,1px)' }, { transform: 'translate(2px,-1px)' }, { transform: 'translate(0,0)' }],
                    { duration: 300 }
                );
            }, 3200);
        });

        function populateReasons() {
            const list = document.getElementById('reasonsList');
            if (list.children.length) return;
            REASONS.forEach((t, i) => {
                const el = document.createElement('div');
                el.className = 'reason-item'; el.textContent = `${i + 1}. ${t}`;
                list.appendChild(el);
            });
        }

        /* ================================================================
           13. NO BUTTON ‚Äî RUNAWAY with text change + shrink + rotate
           ================================================================ */
        let noStep = 0;
        function escapeNoBtn() {
            const cr = mainCard.getBoundingClientRect();
            const pad = 12;
            const maxX = cr.width - noBtn.offsetWidth - pad * 2;
            const maxY = cr.height - noBtn.offsetHeight - pad * 2;
            noBtn.style.position = 'absolute';
            noBtn.style.left = pad + Math.random() * Math.max(maxX, 10) + 'px';
            noBtn.style.top = pad + Math.random() * Math.max(maxY, 10) + 'px';
            noBtn.style.zIndex = '100';
            const rot = (Math.random() - .5) * 30, sc = .65 + Math.random() * .35;
            noBtn.style.transform = `rotate(${rot}deg) scale(${sc})`;
            noBtn.style.opacity = (.5 + Math.random() * .5).toFixed(2);
            noBtn.textContent = NO_TEXTS[noStep % NO_TEXTS.length];
            noStep++;
        }

        mainCard.addEventListener('mousemove', e => {
            const br = noBtn.getBoundingClientRect();
            const dx = e.clientX - (br.left + br.width / 2);
            const dy = e.clientY - (br.top + br.height / 2);
            if (Math.sqrt(dx * dx + dy * dy) < 120) escapeNoBtn();
        });
        mainCard.addEventListener('touchmove', e => {
            const t = e.touches[0]; const br = noBtn.getBoundingClientRect();
            const dx = t.clientX - (br.left + br.width / 2);
            const dy = t.clientY - (br.top + br.height / 2);
            if (Math.sqrt(dx * dx + dy * dy) < 80) escapeNoBtn();
        }, { passive: true });
        noBtn.addEventListener('focus', () => {
            escapeNoBtn();
            liveRegion.textContent = "–ö–Ω–æ–ø–∫–∞ '–ù–µ—Ç' —É–±–µ–∂–∞–ª–∞!";
            statusCard.innerHTML = '<strong>üì° Status</strong> üèÉ –£–±–µ–∂–∞–ª–∞!';
            setTimeout(() => { liveRegion.textContent = '' }, 3000);
        });
        noBtn.addEventListener('click', e => {
            e.preventDefault();
            lazyGif(document.getElementById('noGifImg'), NO_GIF_URL);
            openModal(noModal);
            setTimeout(() => {
                noBtn.style = ''; noBtn.textContent = '–ù–µ—Ç... üò¨'; noStep = 0;
            }, 800);
        });

        /* ================================================================
           14. MODAL CLOSE HELPERS (ESC, outside click, focus trap)
           ================================================================ */
        document.addEventListener('keydown', e => {
            if (e.key === 'Escape') { closeModal(yesModal); closeModal(noModal) }
            if (e.key === 'Tab') {
                const o = document.querySelector('.modal-overlay.open');
                if (o) { e.preventDefault(); o.querySelector('.modal-dialog').focus() }
            }
        });
        [yesModal, noModal].forEach(m => {
            m.addEventListener('click', e => { if (e.target === m) closeModal(m) });
        });

        /* ================================================================
           15. SHARE BUTTON
           ================================================================ */
        document.getElementById('shareBtnModal').addEventListener('click', () => {
            navigator.clipboard.writeText(location.href.split('#')[0] + '#be-my-valentine').then(() => {
                const t = document.getElementById('toast');
                t.classList.add('show'); setTimeout(() => t.classList.remove('show'), 3000);
            });
        });

        /* ================================================================
           16. EASTER EGG ‚Äî type "LOVE" to reveal secret card
           ================================================================ */
        let eggBuf = '';
        const easterEgg = document.getElementById('easterEgg');
        document.addEventListener('keydown', e => {
            if (e.key.length === 1) eggBuf += e.key.toUpperCase();
            if (eggBuf.length > 10) eggBuf = eggBuf.slice(-10);
            if (eggBuf.includes('LOVE')) {
                easterEgg.classList.add('show'); eggBuf = '';
                addLove(20);
                liveRegion.textContent = '–°–µ–∫—Ä–µ—Ç–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ –Ω–∞–π–¥–µ–Ω–∞!';
            }
        });
        document.getElementById('closeEE').addEventListener('click', () => {
            easterEgg.classList.remove('show');
        });

        /* ================================================================
           17. MINI-GAME: Catch Hearts
           ================================================================ */
        let caught = 0;
        const caughtDisplay = document.getElementById('caughtDisplay');

        function spawnCatchHeart() {
            if (caught >= 5 || REDUCED) return;
            const el = document.createElement('div');
            el.className = 'catch-heart';
            el.textContent = '‚ù§Ô∏è';
            el.style.left = 20 + Math.random() * (W - 60) + 'px';
            el.style.top = '-40px';
            el.style.animationDuration = (4 + Math.random() * 3) + 's';
            document.body.appendChild(el);

            el.addEventListener('click', () => {
                caught++; caughtDisplay.textContent = `–ü–æ–π–º–∞–Ω–æ: ${caught} / 5`;
                el.remove(); addLove(3);
                if (caught >= 5) {
                    statusCard.innerHTML = '<strong>üì° Status</strong> üèÜ –í—Å–µ —Å–µ—Ä–¥—Ü–∞ –ø–æ–π–º–∞–Ω—ã!';
                    const t = document.getElementById('toast');
                    t.textContent = 'üèÜ –ë–æ–Ω—É—Å: –¢—ã –ø–æ–π–º–∞–ª–∞ –≤—Å–µ —Å–µ—Ä–¥—Ü–∞! –¢—ã –ª—É—á—à–∞—è!';
                    t.classList.add('show'); setTimeout(() => { t.classList.remove('show'); t.textContent = '–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞! üîó' }, 4000);
                }
            });
            el.addEventListener('animationend', () => el.remove());
        }
        setInterval(spawnCatchHeart, 3500);
        setTimeout(spawnCatchHeart, 2000);

        /* ================================================================
           18. INITIAL MICRO-ANIMATION for card
           ================================================================ */
        setTimeout(() => {
            mainCard.animate(
                [{ transform: 'translateY(4px)' }, { transform: 'translateY(0)' }],
                { duration: 700, easing: 'ease-out' }
            );
        }, 800);
    </script>
</body>

</html>